# GLM-TTS v1.3.0 - 流式推理版本
FROM neosun/glm-tts:all-in-one-v2

WORKDIR /app

# 复制更新的文件
COPY server.py ./
COPY streaming_tts.py ./

# 标签
LABEL version="1.3.0"
LABEL description="GLM-TTS with streaming inference support"
LABEL features="voice-cache,streaming-output,real-time-generation"

# 健康检查
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
    CMD curl -f http://localhost:8080/health || exit 1

CMD ["python3", "server.py"]
