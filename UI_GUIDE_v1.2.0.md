# GLM-TTS v1.2.0 Web UI 使用指南

## 🎨 界面概览

访问 `http://localhost:8080` 即可看到全新的v1.2.0界面。

### 主要功能区域

```
┌─────────────────────────────────────┐
│  🎙️ GLM-TTS v1.2.0                 │
│  零样本语音克隆系统 + 情感控制        │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  GPU 状态: 已加载 (12GB/24GB)       │
│                    [释放显存]        │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  输入文本                            │
│  ┌─────────────────────────────┐   │
│  │ 你好，这是一个测试。         │   │
│  └─────────────────────────────┘   │
│                                     │
│  参考音频 (3-10秒)                  │
│  [选择文件]                         │
│                                     │
│  参考文本（可选，留空自动识别）      │
│  ┌─────────────────────────────┐   │
│  │                             │   │
│  └─────────────────────────────┘   │
│                                     │
│  ▼ 🎭 情感控制 (v1.2.0新增)         │
│  ┌─────────────────────────────┐   │
│  │ 情感类型                     │   │
│  │ [😊 快乐 - 广告、祝福语音]   │   │
│  │                             │   │
│  │ 情感强度: 0.7               │   │
│  │ ━━━━━●━━━━━                │   │
│  │ 0.0=无情感，1.0=最强情感     │   │
│  └─────────────────────────────┘   │
│                                     │
│  ▶ ⚙️ 高级参数（可选）              │
│                                     │
│  [生成语音]                         │
└─────────────────────────────────────┘
```

---

## 🎭 情感控制功能

### 情感类型选择

v1.2.0新增5种情感预设，每种情感都有对应的emoji和使用场景说明：

| 情感 | Emoji | 描述 | 适用场景 |
|-----|-------|------|---------|
| **中性** | 😐 | 无情感倾向 | 新闻播报、说明文档 |
| **快乐** | 😊 | 积极向上 | 广告、祝福语音 |
| **悲伤** | 😢 | 低沉 | 悼词、抒情内容 |
| **愤怒** | 😠 | 激烈 | 辩论、强调语气 |
| **兴奋** | 🤩 | 高昂 | 促销、激励演讲 |

### 情感强度调节

使用滑块调节情感强度（0.0-1.0）：

- **0.0**: 完全无情感（等同于中性）
- **0.3-0.5**: 轻微情感倾向
- **0.6-0.8**: 明显情感表达（推荐）
- **0.9-1.0**: 最强情感（可能过于夸张）

**默认值**: 
- 中性: 0.0
- 快乐: 0.7
- 悲伤: 0.6
- 愤怒: 0.8
- 兴奋: 0.9

---

## 📝 使用步骤

### 基础使用（带情感控制）

1. **输入文本**
   ```
   你好，欢迎使用GLM-TTS！今天天气真好。
   ```

2. **上传参考音频**
   - 点击"选择文件"
   - 选择3-10秒的WAV音频
   - 可以留空"参考文本"让Whisper自动识别

3. **选择情感**
   - 点击情感下拉框
   - 选择"😊 快乐"
   - 调节强度到0.8

4. **生成语音**
   - 点击"生成语音"按钮
   - 等待生成（约30-60秒）
   - 播放或下载生成的音频

### 高级使用

展开"⚙️ 高级参数"可以调节：

- **采样策略**: 快速/平衡/高质量
- **Temperature**: 创造性（0.1-1.5）
- **Top-p**: 采样范围（0.5-1.0）
- **跳过Whisper**: 手动填写参考文本，节省2-3秒

⚠️ **注意**: Temperature和Top-p目前为实验性功能

---

## 🎯 使用场景示例

### 场景1: 广告配音（快乐情感）

```
文本: "双十一大促销！全场五折起，错过再等一年！"
情感: 😊 快乐
强度: 0.8
```

### 场景2: 新闻播报（中性情感）

```
文本: "今天是2025年12月12日，以下是今日新闻。"
情感: 😐 中性
强度: 0.0
```

### 场景3: 激励演讲（兴奋情感）

```
文本: "让我们一起努力，创造更美好的未来！"
情感: 🤩 兴奋
强度: 0.9
```

### 场景4: 悼词朗读（悲伤情感）

```
文本: "我们深切缅怀逝去的亲人，愿他们安息。"
情感: 😢 悲伤
强度: 0.6
```

---

## 🔧 技术说明

### 情感参数传递

UI会将以下参数传递给API：

```javascript
formData.append('emotion', 'happy');           // 情感类型
formData.append('emotion_intensity', '0.8');   // 情感强度
```

后端会将这些参数转换为GRPO优化参数：

```python
emotion_type = 'happy'
emotion_intensity = 0.8
exaggeration = 0.8  # GRPO情感夸张参数
```

### 与Voice Cache集成

情感参数可以与voice_id组合使用：

1. 首次使用：上传音频 + 选择情感 → 自动生成voice_id
2. 后续使用：使用voice_id + 切换情感 → 快速生成

---

## 🎨 UI设计特点

### 视觉设计

- **深色主题**: 减少眼睛疲劳
- **卡片布局**: 清晰的功能分区
- **Emoji图标**: 直观的情感表达
- **实时反馈**: 滑块值实时显示

### 交互设计

- **默认展开**: 情感控制默认可见
- **折叠高级参数**: 减少界面复杂度
- **进度显示**: 实时显示生成进度
- **音频播放**: 内置播放器，支持下载

### 响应式设计

- 支持桌面和移动设备
- 最大宽度900px，居中显示
- 自适应表单元素

---

## 📊 性能提示

### 生成速度

- **无情感**: ~30秒（10秒音频）
- **带情感**: ~30秒（情感参数不影响速度）
- **使用voice_id**: 理论可提速60%（特征提取优化后）

### GPU使用

- **VRAM占用**: ~12GB
- **释放显存**: 点击"释放显存"按钮
- **自动卸载**: 60秒无操作自动释放

---

## 🔗 相关链接

- **API文档**: http://localhost:8080/apidocs
- **情感API**: http://localhost:8080/api/emotions
- **GitHub**: https://github.com/neosun100/GLM-TTS-Enhanced

---

## 💡 提示与技巧

1. **情感强度建议**: 从0.7开始尝试，根据效果调整
2. **参考音频质量**: 清晰、无噪音的音频效果更好
3. **文本长度**: 建议每次生成不超过100字
4. **情感切换**: 可以为同一voice_id尝试不同情感
5. **批量生成**: 使用API进行批量处理

---

**GLM-TTS v1.2.0 - 让语音更有情感** 🎭
